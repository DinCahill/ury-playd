<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>URY playd: AudioSource Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">URY playd
   </div>
   <div id="projectbrief">C++ minimalist audio player</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classAudioSource.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classAudioSource-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">AudioSource Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>An object responsible for decoding an audio file.  
 <a href="classAudioSource.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="audio__source_8hpp_source.html">audio_source.hpp</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for AudioSource:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="classAudioSource__coll__graph.svg" width="163" height="127"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a9a2f5de44325c84e69a7af1331aa159d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAudioSource.html#a9a2f5de44325c84e69a7af1331aa159d">DecodeState</a> : std::uint8_t { <a class="el" href="classAudioSource.html#a9a2f5de44325c84e69a7af1331aa159da22a62bc6e9b3fff5866c4259f046bad8">DecodeState::WAITING_FOR_FRAME</a>, 
<a class="el" href="classAudioSource.html#a9a2f5de44325c84e69a7af1331aa159da9b75f3acd3c3480965b0f5ee466e7f25">DecodeState::DECODING</a>, 
<a class="el" href="classAudioSource.html#a9a2f5de44325c84e69a7af1331aa159da581953f6b20ad7f993b64b1dc632032e">DecodeState::END_OF_FILE</a>
 }</td></tr>
<tr class="memdesc:a9a2f5de44325c84e69a7af1331aa159d"><td class="mdescLeft">&#160;</td><td class="mdescRight">An enumeration of possible states the decoder can be in.  <a href="classAudioSource.html#a9a2f5de44325c84e69a7af1331aa159d">More...</a><br /></td></tr>
<tr class="separator:a9a2f5de44325c84e69a7af1331aa159d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a836c61e348dbe7df6ba255669c015303"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a836c61e348dbe7df6ba255669c015303"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAudioSource.html#a836c61e348dbe7df6ba255669c015303">DecodeVector</a> = std::vector&lt; std::uint8_t &gt;</td></tr>
<tr class="memdesc:a836c61e348dbe7df6ba255669c015303"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of decoded sample vectors. <br /></td></tr>
<tr class="separator:a836c61e348dbe7df6ba255669c015303"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadbadeba50d982d09cfe0d1e05160ef9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aadbadeba50d982d09cfe0d1e05160ef9"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAudioSource.html#aadbadeba50d982d09cfe0d1e05160ef9">DecodeResult</a> = std::pair&lt; <a class="el" href="classAudioSource.html#a9a2f5de44325c84e69a7af1331aa159d">DecodeState</a>, <a class="el" href="classAudioSource.html#a836c61e348dbe7df6ba255669c015303">DecodeVector</a> &gt;</td></tr>
<tr class="memdesc:aadbadeba50d982d09cfe0d1e05160ef9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of the result of <a class="el" href="classAudioSource.html#a6b5071168332523b68593bc47170f36f" title="Performs a round of decoding. ">Decode()</a>. <br /></td></tr>
<tr class="separator:aadbadeba50d982d09cfe0d1e05160ef9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c8138ec9ffb9fd1394d0ad0782d60fa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1c8138ec9ffb9fd1394d0ad0782d60fa"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAudioSource.html#a1c8138ec9ffb9fd1394d0ad0782d60fa">SampleByteCount</a> = int</td></tr>
<tr class="memdesc:a1c8138ec9ffb9fd1394d0ad0782d60fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type for the count of bytes per sample. <br /></td></tr>
<tr class="separator:a1c8138ec9ffb9fd1394d0ad0782d60fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:abcb925739a649c30663385a15d83af26"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAudioSource.html#abcb925739a649c30663385a15d83af26">AudioSource</a> (const std::string &amp;path)</td></tr>
<tr class="memdesc:abcb925739a649c30663385a15d83af26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs an <a class="el" href="classAudioSource.html" title="An object responsible for decoding an audio file. ">AudioSource</a>.  <a href="#abcb925739a649c30663385a15d83af26">More...</a><br /></td></tr>
<tr class="separator:abcb925739a649c30663385a15d83af26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d4b2be34ec676bf01d1ca1784f79a07"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4d4b2be34ec676bf01d1ca1784f79a07"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAudioSource.html#a4d4b2be34ec676bf01d1ca1784f79a07">~AudioSource</a> ()</td></tr>
<tr class="memdesc:a4d4b2be34ec676bf01d1ca1784f79a07"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructs an <a class="el" href="classAudioSource.html" title="An object responsible for decoding an audio file. ">AudioSource</a>. <br /></td></tr>
<tr class="separator:a4d4b2be34ec676bf01d1ca1784f79a07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea5c3828f1b22a9e103a5d56f9ffa5ec"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAudioSource.html#aea5c3828f1b22a9e103a5d56f9ffa5ec">Path</a> () const </td></tr>
<tr class="memdesc:aea5c3828f1b22a9e103a5d56f9ffa5ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the file-path of this audio source's audio file.  <a href="#aea5c3828f1b22a9e103a5d56f9ffa5ec">More...</a><br /></td></tr>
<tr class="separator:aea5c3828f1b22a9e103a5d56f9ffa5ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b5071168332523b68593bc47170f36f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classAudioSource.html#aadbadeba50d982d09cfe0d1e05160ef9">DecodeResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAudioSource.html#a6b5071168332523b68593bc47170f36f">Decode</a> ()</td></tr>
<tr class="memdesc:a6b5071168332523b68593bc47170f36f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a round of decoding.  <a href="#a6b5071168332523b68593bc47170f36f">More...</a><br /></td></tr>
<tr class="separator:a6b5071168332523b68593bc47170f36f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a267178b39a3a4d2fc86f41f6a96caf03"><td class="memItemLeft" align="right" valign="top">std::uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAudioSource.html#a267178b39a3a4d2fc86f41f6a96caf03">ChannelCount</a> () const </td></tr>
<tr class="memdesc:a267178b39a3a4d2fc86f41f6a96caf03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the channel count.  <a href="#a267178b39a3a4d2fc86f41f6a96caf03">More...</a><br /></td></tr>
<tr class="separator:a267178b39a3a4d2fc86f41f6a96caf03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee0c4889919554f3c947a217f4436378"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAudioSource.html#aee0c4889919554f3c947a217f4436378">SampleRate</a> () const </td></tr>
<tr class="memdesc:aee0c4889919554f3c947a217f4436378"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the sample rate.  <a href="#aee0c4889919554f3c947a217f4436378">More...</a><br /></td></tr>
<tr class="separator:aee0c4889919554f3c947a217f4436378"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6c567c4e2f3c6673d2a289d84aedae0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sample__formats_8hpp.html#a21cca244e782ff3acc8805fb73236772">SampleFormat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAudioSource.html#aa6c567c4e2f3c6673d2a289d84aedae0">OutputSampleFormat</a> () const </td></tr>
<tr class="memdesc:aa6c567c4e2f3c6673d2a289d84aedae0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the output sample format.  <a href="#aa6c567c4e2f3c6673d2a289d84aedae0">More...</a><br /></td></tr>
<tr class="separator:aa6c567c4e2f3c6673d2a289d84aedae0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af63c7249c1cf8d4ef86274ea2fdc1f26"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAudioSource.html#af63c7249c1cf8d4ef86274ea2fdc1f26">BufferSampleCapacity</a> () const </td></tr>
<tr class="memdesc:af63c7249c1cf8d4ef86274ea2fdc1f26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of samples this decoder's buffer can store.  <a href="#af63c7249c1cf8d4ef86274ea2fdc1f26">More...</a><br /></td></tr>
<tr class="separator:af63c7249c1cf8d4ef86274ea2fdc1f26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6eb4d0fc3d1d60375edc2745b635818"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAudioSource.html#ae6eb4d0fc3d1d60375edc2745b635818">BytesPerSample</a> () const </td></tr>
<tr class="memdesc:ae6eb4d0fc3d1d60375edc2745b635818"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of bytes for each sample this decoder outputs.  <a href="#ae6eb4d0fc3d1d60375edc2745b635818">More...</a><br /></td></tr>
<tr class="separator:ae6eb4d0fc3d1d60375edc2745b635818"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8639603fb59d21f5c1369707f16975c"><td class="memItemLeft" align="right" valign="top">std::uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAudioSource.html#ad8639603fb59d21f5c1369707f16975c">Seek</a> (std::chrono::microseconds position)</td></tr>
<tr class="memdesc:ad8639603fb59d21f5c1369707f16975c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Seeks to the given position, in microseconds.  <a href="#ad8639603fb59d21f5c1369707f16975c">More...</a><br /></td></tr>
<tr class="separator:ad8639603fb59d21f5c1369707f16975c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0a5d14505c36238d4a8a465122ff06e"><td class="memItemLeft" align="right" valign="top">std::uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAudioSource.html#ac0a5d14505c36238d4a8a465122ff06e">SamplePositionFromMicroseconds</a> (std::chrono::microseconds position) const </td></tr>
<tr class="memdesc:ac0a5d14505c36238d4a8a465122ff06e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a position in microseconds to an elapsed sample count.  <a href="#ac0a5d14505c36238d4a8a465122ff06e">More...</a><br /></td></tr>
<tr class="separator:ac0a5d14505c36238d4a8a465122ff06e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9c0d4b60adfc1470a560bbb8e66aaf8"><td class="memItemLeft" align="right" valign="top">std::chrono::microseconds&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAudioSource.html#aa9c0d4b60adfc1470a560bbb8e66aaf8">MicrosecondPositionFromSamples</a> (std::uint64_t samples) const </td></tr>
<tr class="memdesc:aa9c0d4b60adfc1470a560bbb8e66aaf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts an elapsed sample count to a position in microseconds.  <a href="#aa9c0d4b60adfc1470a560bbb8e66aaf8">More...</a><br /></td></tr>
<tr class="separator:aa9c0d4b60adfc1470a560bbb8e66aaf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a9b10234d7c9f29b17008b4dc3eab2a71"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAudioSource.html#a9b10234d7c9f29b17008b4dc3eab2a71">Open</a> (const std::string &amp;path)</td></tr>
<tr class="memdesc:a9b10234d7c9f29b17008b4dc3eab2a71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens a new file for this <a class="el" href="classAudioSource.html" title="An object responsible for decoding an audio file. ">AudioSource</a>.  <a href="#a9b10234d7c9f29b17008b4dc3eab2a71">More...</a><br /></td></tr>
<tr class="separator:a9b10234d7c9f29b17008b4dc3eab2a71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46444de950d02ac35a695ad167fed2f4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a46444de950d02ac35a695ad167fed2f4"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAudioSource.html#a46444de950d02ac35a695ad167fed2f4">Close</a> ()</td></tr>
<tr class="memdesc:a46444de950d02ac35a695ad167fed2f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the <a class="el" href="classAudioSource.html" title="An object responsible for decoding an audio file. ">AudioSource</a>'s current file. <br /></td></tr>
<tr class="separator:a46444de950d02ac35a695ad167fed2f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:abe3899ebe685335a84c5bfee5a20a96f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classAudioSource.html#a9a2f5de44325c84e69a7af1331aa159d">DecodeState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAudioSource.html#abe3899ebe685335a84c5bfee5a20a96f">decode_state</a></td></tr>
<tr class="memdesc:abe3899ebe685335a84c5bfee5a20a96f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current state of decoding.  <a href="#abe3899ebe685335a84c5bfee5a20a96f">More...</a><br /></td></tr>
<tr class="separator:abe3899ebe685335a84c5bfee5a20a96f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad278f3b315e3ad91add683d5eda48a03"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad278f3b315e3ad91add683d5eda48a03"></a>
std::vector&lt; uint8_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAudioSource.html#ad278f3b315e3ad91add683d5eda48a03">buffer</a></td></tr>
<tr class="memdesc:ad278f3b315e3ad91add683d5eda48a03"><td class="mdescLeft">&#160;</td><td class="mdescRight">The decoding buffer. <br /></td></tr>
<tr class="separator:ad278f3b315e3ad91add683d5eda48a03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bbce89d4bef9cf46b1113de3245655a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2bbce89d4bef9cf46b1113de3245655a"></a>
sox_format_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAudioSource.html#a2bbce89d4bef9cf46b1113de3245655a">context</a></td></tr>
<tr class="memdesc:a2bbce89d4bef9cf46b1113de3245655a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the SoX context associated with this source. <br /></td></tr>
<tr class="separator:a2bbce89d4bef9cf46b1113de3245655a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a9c269c8d9c633bcd11d596c1ba3fd575"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9c269c8d9c633bcd11d596c1ba3fd575"></a>
static const size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAudioSource.html#a9c269c8d9c633bcd11d596c1ba3fd575">BUFFER_SIZE</a> = 16384</td></tr>
<tr class="memdesc:a9c269c8d9c633bcd11d596c1ba3fd575"><td class="mdescLeft">&#160;</td><td class="mdescRight">The size of the internal decoding buffer, in bytes. <br /></td></tr>
<tr class="separator:a9c269c8d9c633bcd11d596c1ba3fd575"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>An object responsible for decoding an audio file. </p>
<p>The <a class="el" href="classAudioSource.html" title="An object responsible for decoding an audio file. ">AudioSource</a> is an interface to the ffmpeg library, which represents all the ffmpeg state associated with one file. It can be polled to decode frames of audio data, which are returned as byte vectors. </p>

<p>Definition at line <a class="el" href="audio__source_8hpp_source.html#l00032">32</a> of file <a class="el" href="audio__source_8hpp_source.html">audio_source.hpp</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="a9a2f5de44325c84e69a7af1331aa159d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classAudioSource.html#a9a2f5de44325c84e69a7af1331aa159d">AudioSource::DecodeState</a> : std::uint8_t</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>An enumeration of possible states the decoder can be in. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a9a2f5de44325c84e69a7af1331aa159da22a62bc6e9b3fff5866c4259f046bad8"></a>WAITING_FOR_FRAME&#160;</td><td class="fielddoc">
<p>The decoder is currently trying to acquire a frame. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a9a2f5de44325c84e69a7af1331aa159da9b75f3acd3c3480965b0f5ee466e7f25"></a>DECODING&#160;</td><td class="fielddoc">
<p>The decoder is currently decoding a frame. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a9a2f5de44325c84e69a7af1331aa159da581953f6b20ad7f993b64b1dc632032e"></a>END_OF_FILE&#160;</td><td class="fielddoc">
<p>The decoder has run out of things to decode. </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="audio__source_8hpp_source.html#l00035">35</a> of file <a class="el" href="audio__source_8hpp_source.html">audio_source.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                           : std::uint8_t {</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        WAITING_FOR_FRAME,</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        DECODING,</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        END_OF_FILE</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    };</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="abcb925739a649c30663385a15d83af26"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AudioSource::AudioSource </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs an <a class="el" href="classAudioSource.html" title="An object responsible for decoding an audio file. ">AudioSource</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>The path to the file to load and decode using this decoder. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="audio__source_8cpp_source.html#l00034">34</a> of file <a class="el" href="audio__source_8cpp_source.html">audio_source.cpp</a>.</p>

<p>References <a class="el" href="audio__source_8cpp_source.html#l00172">Open()</a>.</p>
<div class="fragment"><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    : <a class="code" href="classAudioSource.html#ad278f3b315e3ad91add683d5eda48a03">buffer</a>(<a class="code" href="classAudioSource.html#a9c269c8d9c633bcd11d596c1ba3fd575">BUFFER_SIZE</a>), <a class="code" href="classAudioSource.html#a2bbce89d4bef9cf46b1113de3245655a">context</a>(<span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;{</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <a class="code" href="classAudioSource.html#a9b10234d7c9f29b17008b4dc3eab2a71">Open</a>(path);</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;}</div>
<div class="ttc" id="classAudioSource_html_a9c269c8d9c633bcd11d596c1ba3fd575"><div class="ttname"><a href="classAudioSource.html#a9c269c8d9c633bcd11d596c1ba3fd575">AudioSource::BUFFER_SIZE</a></div><div class="ttdeci">static const size_t BUFFER_SIZE</div><div class="ttdoc">The size of the internal decoding buffer, in bytes. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8hpp_source.html#l00136">audio_source.hpp:136</a></div></div>
<div class="ttc" id="classAudioSource_html_a2bbce89d4bef9cf46b1113de3245655a"><div class="ttname"><a href="classAudioSource.html#a2bbce89d4bef9cf46b1113de3245655a">AudioSource::context</a></div><div class="ttdeci">sox_format_t * context</div><div class="ttdoc">Pointer to the SoX context associated with this source. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8hpp_source.html#l00145">audio_source.hpp:145</a></div></div>
<div class="ttc" id="classAudioSource_html_ad278f3b315e3ad91add683d5eda48a03"><div class="ttname"><a href="classAudioSource.html#ad278f3b315e3ad91add683d5eda48a03">AudioSource::buffer</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; buffer</div><div class="ttdoc">The decoding buffer. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8hpp_source.html#l00142">audio_source.hpp:142</a></div></div>
<div class="ttc" id="classAudioSource_html_a9b10234d7c9f29b17008b4dc3eab2a71"><div class="ttname"><a href="classAudioSource.html#a9b10234d7c9f29b17008b4dc3eab2a71">AudioSource::Open</a></div><div class="ttdeci">void Open(const std::string &amp;path)</div><div class="ttdoc">Opens a new file for this AudioSource. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8cpp_source.html#l00172">audio_source.cpp:172</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="af63c7249c1cf8d4ef86274ea2fdc1f26"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t AudioSource::BufferSampleCapacity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the number of samples this decoder's buffer can store. </p>
<dl class="section return"><dt>Returns</dt><dd>The buffer sample capacity, in samples. </dd></dl>

<p>Definition at line <a class="el" href="audio__source_8cpp_source.html#l00058">58</a> of file <a class="el" href="audio__source_8cpp_source.html">audio_source.cpp</a>.</p>

<p>References <a class="el" href="audio__source_8hpp_source.html#l00142">buffer</a>, and <a class="el" href="audio__source_8cpp_source.html#l00091">BytesPerSample()</a>.</p>

<p>Referenced by <a class="el" href="audio__source_8cpp_source.html#l00133">Decode()</a>.</p>
<div class="fragment"><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;{</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">return</span> this-&gt;<a class="code" href="classAudioSource.html#ad278f3b315e3ad91add683d5eda48a03">buffer</a>.size() / this-&gt;<a class="code" href="classAudioSource.html#ae6eb4d0fc3d1d60375edc2745b635818">BytesPerSample</a>();</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;}</div>
<div class="ttc" id="classAudioSource_html_ae6eb4d0fc3d1d60375edc2745b635818"><div class="ttname"><a href="classAudioSource.html#ae6eb4d0fc3d1d60375edc2745b635818">AudioSource::BytesPerSample</a></div><div class="ttdeci">size_t BytesPerSample() const </div><div class="ttdoc">Returns the number of bytes for each sample this decoder outputs. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8cpp_source.html#l00091">audio_source.cpp:91</a></div></div>
<div class="ttc" id="classAudioSource_html_ad278f3b315e3ad91add683d5eda48a03"><div class="ttname"><a href="classAudioSource.html#ad278f3b315e3ad91add683d5eda48a03">AudioSource::buffer</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; buffer</div><div class="ttdoc">The decoding buffer. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8hpp_source.html#l00142">audio_source.hpp:142</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae6eb4d0fc3d1d60375edc2745b635818"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t AudioSource::BytesPerSample </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the number of bytes for each sample this decoder outputs. </p>
<p>As the decoder returns packed samples, this includes the channel count as a factor. </p><dl class="section return"><dt>Returns</dt><dd>The number of bytes per sample. </dd></dl>

<p>Definition at line <a class="el" href="audio__source_8cpp_source.html#l00091">91</a> of file <a class="el" href="audio__source_8cpp_source.html">audio_source.cpp</a>.</p>

<p>References <a class="el" href="audio__source_8cpp_source.html#l00052">ChannelCount()</a>, and <a class="el" href="audio__source_8hpp_source.html#l00145">context</a>.</p>

<p>Referenced by <a class="el" href="audio__source_8cpp_source.html#l00058">BufferSampleCapacity()</a>, and <a class="el" href="audio__source_8cpp_source.html#l00133">Decode()</a>.</p>
<div class="fragment"><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;{</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    assert(this-&gt;<a class="code" href="classAudioSource.html#a2bbce89d4bef9cf46b1113de3245655a">context</a> != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="comment">// Since libsox always outputs 32-bit samples, the bytes per sample is</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="comment">// always 4 per channel.</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="comment">// SoX has a slightly peculiar notion of sample counts, in that it</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="comment">// regards each channel as having its own separate sample, so we need</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment">// to multiply and divide sample counts by the channel count when</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">// talking to SoX.</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">return</span> 4 * <a class="code" href="classAudioSource.html#a267178b39a3a4d2fc86f41f6a96caf03">ChannelCount</a>();</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;}</div>
<div class="ttc" id="classAudioSource_html_a2bbce89d4bef9cf46b1113de3245655a"><div class="ttname"><a href="classAudioSource.html#a2bbce89d4bef9cf46b1113de3245655a">AudioSource::context</a></div><div class="ttdeci">sox_format_t * context</div><div class="ttdoc">Pointer to the SoX context associated with this source. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8hpp_source.html#l00145">audio_source.hpp:145</a></div></div>
<div class="ttc" id="classAudioSource_html_a267178b39a3a4d2fc86f41f6a96caf03"><div class="ttname"><a href="classAudioSource.html#a267178b39a3a4d2fc86f41f6a96caf03">AudioSource::ChannelCount</a></div><div class="ttdeci">std::uint8_t ChannelCount() const </div><div class="ttdoc">Returns the channel count. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8cpp_source.html#l00052">audio_source.cpp:52</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a267178b39a3a4d2fc86f41f6a96caf03"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::uint8_t AudioSource::ChannelCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the channel count. </p>
<dl class="section return"><dt>Returns</dt><dd>The number of channels this <a class="el" href="classAudioSource.html" title="An object responsible for decoding an audio file. ">AudioSource</a> is decoding. </dd></dl>

<p>Definition at line <a class="el" href="audio__source_8cpp_source.html#l00052">52</a> of file <a class="el" href="audio__source_8cpp_source.html">audio_source.cpp</a>.</p>

<p>References <a class="el" href="audio__source_8hpp_source.html#l00145">context</a>.</p>

<p>Referenced by <a class="el" href="audio__source_8cpp_source.html#l00091">BytesPerSample()</a>, <a class="el" href="audio__source_8cpp_source.html#l00133">Decode()</a>, and <a class="el" href="audio__source_8cpp_source.html#l00105">Seek()</a>.</p>
<div class="fragment"><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;{</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    assert(this-&gt;<a class="code" href="classAudioSource.html#a2bbce89d4bef9cf46b1113de3245655a">context</a> != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordflow">return</span> this-&gt;<a class="code" href="classAudioSource.html#a2bbce89d4bef9cf46b1113de3245655a">context</a>-&gt;signal.channels;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;}</div>
<div class="ttc" id="classAudioSource_html_a2bbce89d4bef9cf46b1113de3245655a"><div class="ttname"><a href="classAudioSource.html#a2bbce89d4bef9cf46b1113de3245655a">AudioSource::context</a></div><div class="ttdeci">sox_format_t * context</div><div class="ttdoc">Pointer to the SoX context associated with this source. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8hpp_source.html#l00145">audio_source.hpp:145</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6b5071168332523b68593bc47170f36f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classAudioSource.html#aadbadeba50d982d09cfe0d1e05160ef9">AudioSource::DecodeResult</a> AudioSource::Decode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a round of decoding. </p>
<dl class="section return"><dt>Returns</dt><dd>A pair of the decoder's state upon finishing the decoding round and the vector of bytes decoded. The vector may be empty, if the decoding round did not finish off a frame. </dd></dl>

<p>Definition at line <a class="el" href="audio__source_8cpp_source.html#l00133">133</a> of file <a class="el" href="audio__source_8cpp_source.html">audio_source.cpp</a>.</p>

<p>References <a class="el" href="audio__source_8hpp_source.html#l00142">buffer</a>, <a class="el" href="audio__source_8cpp_source.html#l00058">BufferSampleCapacity()</a>, <a class="el" href="audio__source_8cpp_source.html#l00091">BytesPerSample()</a>, <a class="el" href="audio__source_8cpp_source.html#l00052">ChannelCount()</a>, <a class="el" href="audio__source_8hpp_source.html#l00145">context</a>, <a class="el" href="audio__source_8hpp_source.html#l00140">decode_state</a>, <a class="el" href="classAudioSource.html#a9a2f5de44325c84e69a7af1331aa159da9b75f3acd3c3480965b0f5ee466e7f25">DECODING</a>, and <a class="el" href="classAudioSource.html#a9a2f5de44325c84e69a7af1331aa159da581953f6b20ad7f993b64b1dc632032e">END_OF_FILE</a>.</p>
<div class="fragment"><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;{</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    assert(this-&gt;<a class="code" href="classAudioSource.html#a2bbce89d4bef9cf46b1113de3245655a">context</a> != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keyword">auto</span> buf = <span class="keyword">reinterpret_cast&lt;</span>sox_sample_t *<span class="keyword">&gt;</span>(&amp;this-&gt;<a class="code" href="classAudioSource.html#ad278f3b315e3ad91add683d5eda48a03">buffer</a>.front());</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="comment">// See BytesPerSample() for an explanation of this ChannelCount().</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keyword">auto</span> sox_capacity = <a class="code" href="classAudioSource.html#af63c7249c1cf8d4ef86274ea2fdc1f26">BufferSampleCapacity</a>() * <a class="code" href="classAudioSource.html#a267178b39a3a4d2fc86f41f6a96caf03">ChannelCount</a>();</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordtype">size_t</span> read = sox_read(this-&gt;<a class="code" href="classAudioSource.html#a2bbce89d4bef9cf46b1113de3245655a">context</a>, buf, sox_capacity);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <a class="code" href="classAudioSource.html#a836c61e348dbe7df6ba255669c015303">DecodeVector</a> decoded;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">if</span> (read == 0) {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        this-&gt;<a class="code" href="classAudioSource.html#abe3899ebe685335a84c5bfee5a20a96f">decode_state</a> = <a class="code" href="classAudioSource.html#a9a2f5de44325c84e69a7af1331aa159da581953f6b20ad7f993b64b1dc632032e">DecodeState::END_OF_FILE</a>;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        this-&gt;<a class="code" href="classAudioSource.html#abe3899ebe685335a84c5bfee5a20a96f">decode_state</a> = <a class="code" href="classAudioSource.html#a9a2f5de44325c84e69a7af1331aa159da9b75f3acd3c3480965b0f5ee466e7f25">DecodeState::DECODING</a>;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="comment">// Copy only the bit of the buffer occupied by decoded data</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="comment">// See BytesPerSample() for an explanation of the</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="comment">// ChannelCount() division.</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keyword">auto</span> front = this-&gt;<a class="code" href="classAudioSource.html#ad278f3b315e3ad91add683d5eda48a03">buffer</a>.begin();</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keyword">auto</span> read_bytes = (<a class="code" href="classAudioSource.html#ae6eb4d0fc3d1d60375edc2745b635818">BytesPerSample</a>() * read) / <a class="code" href="classAudioSource.html#a267178b39a3a4d2fc86f41f6a96caf03">ChannelCount</a>();</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        decoded = <a class="code" href="classAudioSource.html#a836c61e348dbe7df6ba255669c015303">DecodeVector</a>(front, front + read_bytes);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">return</span> std::make_pair(this-&gt;<a class="code" href="classAudioSource.html#abe3899ebe685335a84c5bfee5a20a96f">decode_state</a>, decoded);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div>
<div class="ttc" id="classAudioSource_html_a2bbce89d4bef9cf46b1113de3245655a"><div class="ttname"><a href="classAudioSource.html#a2bbce89d4bef9cf46b1113de3245655a">AudioSource::context</a></div><div class="ttdeci">sox_format_t * context</div><div class="ttdoc">Pointer to the SoX context associated with this source. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8hpp_source.html#l00145">audio_source.hpp:145</a></div></div>
<div class="ttc" id="classAudioSource_html_af63c7249c1cf8d4ef86274ea2fdc1f26"><div class="ttname"><a href="classAudioSource.html#af63c7249c1cf8d4ef86274ea2fdc1f26">AudioSource::BufferSampleCapacity</a></div><div class="ttdeci">size_t BufferSampleCapacity() const </div><div class="ttdoc">Returns the number of samples this decoder&#39;s buffer can store. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8cpp_source.html#l00058">audio_source.cpp:58</a></div></div>
<div class="ttc" id="classAudioSource_html_ae6eb4d0fc3d1d60375edc2745b635818"><div class="ttname"><a href="classAudioSource.html#ae6eb4d0fc3d1d60375edc2745b635818">AudioSource::BytesPerSample</a></div><div class="ttdeci">size_t BytesPerSample() const </div><div class="ttdoc">Returns the number of bytes for each sample this decoder outputs. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8cpp_source.html#l00091">audio_source.cpp:91</a></div></div>
<div class="ttc" id="classAudioSource_html_abe3899ebe685335a84c5bfee5a20a96f"><div class="ttname"><a href="classAudioSource.html#abe3899ebe685335a84c5bfee5a20a96f">AudioSource::decode_state</a></div><div class="ttdeci">DecodeState decode_state</div><div class="ttdoc">The current state of decoding. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8hpp_source.html#l00140">audio_source.hpp:140</a></div></div>
<div class="ttc" id="classAudioSource_html_a9a2f5de44325c84e69a7af1331aa159da9b75f3acd3c3480965b0f5ee466e7f25"><div class="ttname"><a href="classAudioSource.html#a9a2f5de44325c84e69a7af1331aa159da9b75f3acd3c3480965b0f5ee466e7f25">AudioSource::DecodeState::DECODING</a></div><div class="ttdoc">The decoder is currently decoding a frame. </div></div>
<div class="ttc" id="classAudioSource_html_a9a2f5de44325c84e69a7af1331aa159da581953f6b20ad7f993b64b1dc632032e"><div class="ttname"><a href="classAudioSource.html#a9a2f5de44325c84e69a7af1331aa159da581953f6b20ad7f993b64b1dc632032e">AudioSource::DecodeState::END_OF_FILE</a></div><div class="ttdoc">The decoder has run out of things to decode. </div></div>
<div class="ttc" id="classAudioSource_html_a267178b39a3a4d2fc86f41f6a96caf03"><div class="ttname"><a href="classAudioSource.html#a267178b39a3a4d2fc86f41f6a96caf03">AudioSource::ChannelCount</a></div><div class="ttdeci">std::uint8_t ChannelCount() const </div><div class="ttdoc">Returns the channel count. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8cpp_source.html#l00052">audio_source.cpp:52</a></div></div>
<div class="ttc" id="classAudioSource_html_a836c61e348dbe7df6ba255669c015303"><div class="ttname"><a href="classAudioSource.html#a836c61e348dbe7df6ba255669c015303">AudioSource::DecodeVector</a></div><div class="ttdeci">std::vector&lt; std::uint8_t &gt; DecodeVector</div><div class="ttdoc">Type of decoded sample vectors. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8hpp_source.html#l00045">audio_source.hpp:45</a></div></div>
<div class="ttc" id="classAudioSource_html_ad278f3b315e3ad91add683d5eda48a03"><div class="ttname"><a href="classAudioSource.html#ad278f3b315e3ad91add683d5eda48a03">AudioSource::buffer</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; buffer</div><div class="ttdoc">The decoding buffer. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8hpp_source.html#l00142">audio_source.hpp:142</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa9c0d4b60adfc1470a560bbb8e66aaf8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::chrono::microseconds AudioSource::MicrosecondPositionFromSamples </td>
          <td>(</td>
          <td class="paramtype">std::uint64_t&#160;</td>
          <td class="paramname"><em>samples</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts an elapsed sample count to a position in microseconds. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">samples</td><td>The number of elapsed samples. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The corresponding song position, in microseconds. </dd></dl>

<p>Definition at line <a class="el" href="audio__source_8cpp_source.html#l00081">81</a> of file <a class="el" href="audio__source_8cpp_source.html">audio_source.cpp</a>.</p>

<p>References <a class="el" href="audio__source_8cpp_source.html#l00063">SampleRate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;{</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="comment">// This is basically SamplePositionFromMicroseconds but backwards.</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keyword">auto</span> position_secs = std::chrono::seconds(samples) / <a class="code" href="classAudioSource.html#aee0c4889919554f3c947a217f4436378">SampleRate</a>();</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">return</span> std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                    position_secs);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;}</div>
<div class="ttc" id="classAudioSource_html_aee0c4889919554f3c947a217f4436378"><div class="ttname"><a href="classAudioSource.html#aee0c4889919554f3c947a217f4436378">AudioSource::SampleRate</a></div><div class="ttdeci">double SampleRate() const </div><div class="ttdoc">Returns the sample rate. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8cpp_source.html#l00063">audio_source.cpp:63</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9b10234d7c9f29b17008b4dc3eab2a71"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AudioSource::Open </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Opens a new file for this <a class="el" href="classAudioSource.html" title="An object responsible for decoding an audio file. ">AudioSource</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>The absolute path to the audio file to load. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="audio__source_8cpp_source.html#l00172">172</a> of file <a class="el" href="audio__source_8cpp_source.html">audio_source.cpp</a>.</p>

<p>References <a class="el" href="audio__source_8cpp_source.html#l00184">Close()</a>, and <a class="el" href="audio__source_8hpp_source.html#l00145">context</a>.</p>

<p>Referenced by <a class="el" href="audio__source_8cpp_source.html#l00034">AudioSource()</a>, and <a class="el" href="audio__source_8cpp_source.html#l00105">Seek()</a>.</p>
<div class="fragment"><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;{</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="classAudioSource.html#a46444de950d02ac35a695ad167fed2f4">Close</a>();</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    this-&gt;<a class="code" href="classAudioSource.html#a2bbce89d4bef9cf46b1113de3245655a">context</a> = sox_open_read(path.c_str(), <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classAudioSource.html#a2bbce89d4bef9cf46b1113de3245655a">context</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        std::ostringstream os;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        os &lt;&lt; <span class="stringliteral">&quot;couldn&#39;t open &quot;</span> &lt;&lt; path;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="classFileError.html">FileError</a>(os.str());</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;}</div>
<div class="ttc" id="classAudioSource_html_a2bbce89d4bef9cf46b1113de3245655a"><div class="ttname"><a href="classAudioSource.html#a2bbce89d4bef9cf46b1113de3245655a">AudioSource::context</a></div><div class="ttdeci">sox_format_t * context</div><div class="ttdoc">Pointer to the SoX context associated with this source. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8hpp_source.html#l00145">audio_source.hpp:145</a></div></div>
<div class="ttc" id="classAudioSource_html_a46444de950d02ac35a695ad167fed2f4"><div class="ttname"><a href="classAudioSource.html#a46444de950d02ac35a695ad167fed2f4">AudioSource::Close</a></div><div class="ttdeci">void Close()</div><div class="ttdoc">Closes the AudioSource&#39;s current file. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8cpp_source.html#l00184">audio_source.cpp:184</a></div></div>
<div class="ttc" id="classFileError_html"><div class="ttname"><a href="classFileError.html">FileError</a></div><div class="ttdoc">An Error signifying that playd can&#39;t read a file. </div><div class="ttdef"><b>Definition:</b> <a href="errors_8hpp_source.html#l00068">errors.hpp:68</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa6c567c4e2f3c6673d2a289d84aedae0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sample__formats_8hpp.html#a21cca244e782ff3acc8805fb73236772">SampleFormat</a> AudioSource::OutputSampleFormat </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the output sample format. </p>
<dl class="section return"><dt>Returns</dt><dd>The output sample format, as a SampleFormat.</dd>
<dd>
The sample format of the data returned by this decoder. </dd></dl>

<p>Definition at line <a class="el" href="audio__source_8cpp_source.html#l00164">164</a> of file <a class="el" href="audio__source_8cpp_source.html">audio_source.cpp</a>.</p>

<p>References <a class="el" href="sample__formats_8hpp.html#a21cca244e782ff3acc8805fb73236772ae222eded89afdf8cf763bb1a58a04fc0">PACKED_SIGNED_INT_32</a>.</p>
<div class="fragment"><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;{</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="comment">// &#39;The function sox_read reads len samples in to buf using the format</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment">// handler specified by ft. All data read is converted to 32-bit signed</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="comment">// samples before being placed in to buf.&#39;</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="sample__formats_8hpp.html#a21cca244e782ff3acc8805fb73236772ae222eded89afdf8cf763bb1a58a04fc0">SampleFormat::PACKED_SIGNED_INT_32</a>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;}</div>
<div class="ttc" id="sample__formats_8hpp_html_a21cca244e782ff3acc8805fb73236772ae222eded89afdf8cf763bb1a58a04fc0"><div class="ttname"><a href="sample__formats_8hpp.html#a21cca244e782ff3acc8805fb73236772ae222eded89afdf8cf763bb1a58a04fc0">SampleFormat::PACKED_SIGNED_INT_32</a></div><div class="ttdoc">Packed 32-bit signed integer. </div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aea5c3828f1b22a9e103a5d56f9ffa5ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string AudioSource::Path </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the file-path of this audio source's audio file. </p>
<dl class="section return"><dt>Returns</dt><dd>The audio file's path. </dd></dl>

<p>Definition at line <a class="el" href="audio__source_8cpp_source.html#l00045">45</a> of file <a class="el" href="audio__source_8cpp_source.html">audio_source.cpp</a>.</p>

<p>References <a class="el" href="audio__source_8hpp_source.html#l00145">context</a>.</p>

<p>Referenced by <a class="el" href="audio__source_8cpp_source.html#l00105">Seek()</a>.</p>
<div class="fragment"><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;{</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    assert(this-&gt;<a class="code" href="classAudioSource.html#a2bbce89d4bef9cf46b1113de3245655a">context</a> != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    assert(this-&gt;<a class="code" href="classAudioSource.html#a2bbce89d4bef9cf46b1113de3245655a">context</a>-&gt;filename != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordflow">return</span> std::string(this-&gt;<a class="code" href="classAudioSource.html#a2bbce89d4bef9cf46b1113de3245655a">context</a>-&gt;filename);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;}</div>
<div class="ttc" id="classAudioSource_html_a2bbce89d4bef9cf46b1113de3245655a"><div class="ttname"><a href="classAudioSource.html#a2bbce89d4bef9cf46b1113de3245655a">AudioSource::context</a></div><div class="ttdeci">sox_format_t * context</div><div class="ttdoc">Pointer to the SoX context associated with this source. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8hpp_source.html#l00145">audio_source.hpp:145</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac0a5d14505c36238d4a8a465122ff06e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::uint64_t AudioSource::SamplePositionFromMicroseconds </td>
          <td>(</td>
          <td class="paramtype">std::chrono::microseconds&#160;</td>
          <td class="paramname"><em>position</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts a position in microseconds to an elapsed sample count. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">position</td><td>The song position, in microseconds. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The corresponding number of elapsed samples. </dd></dl>

<p>Definition at line <a class="el" href="audio__source_8cpp_source.html#l00069">69</a> of file <a class="el" href="audio__source_8cpp_source.html">audio_source.cpp</a>.</p>

<p>References <a class="el" href="audio__source_8cpp_source.html#l00063">SampleRate()</a>.</p>

<p>Referenced by <a class="el" href="audio__source_8cpp_source.html#l00105">Seek()</a>.</p>
<div class="fragment"><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;{</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="comment">// The sample rate is expressed in terms of samples per second, so we</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="comment">// need to convert the position to seconds then multiply by the rate.</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="comment">// We do things in a slightly peculiar order to minimise rounding.</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keyword">auto</span> sample_micros = usec * <a class="code" href="classAudioSource.html#aee0c4889919554f3c947a217f4436378">SampleRate</a>();</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">return</span> std::chrono::duration_cast&lt;std::chrono::seconds&gt;(sample_micros)</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                    .count();</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;}</div>
<div class="ttc" id="classAudioSource_html_aee0c4889919554f3c947a217f4436378"><div class="ttname"><a href="classAudioSource.html#aee0c4889919554f3c947a217f4436378">AudioSource::SampleRate</a></div><div class="ttdeci">double SampleRate() const </div><div class="ttdoc">Returns the sample rate. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8cpp_source.html#l00063">audio_source.cpp:63</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aee0c4889919554f3c947a217f4436378"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double AudioSource::SampleRate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the sample rate. </p>
<dl class="section return"><dt>Returns</dt><dd>The output sample rate (Hz) as a double-precision floating point. </dd></dl>

<p>Definition at line <a class="el" href="audio__source_8cpp_source.html#l00063">63</a> of file <a class="el" href="audio__source_8cpp_source.html">audio_source.cpp</a>.</p>

<p>References <a class="el" href="audio__source_8hpp_source.html#l00145">context</a>.</p>

<p>Referenced by <a class="el" href="audio__source_8cpp_source.html#l00081">MicrosecondPositionFromSamples()</a>, and <a class="el" href="audio__source_8cpp_source.html#l00069">SamplePositionFromMicroseconds()</a>.</p>
<div class="fragment"><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;{</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    assert(this-&gt;<a class="code" href="classAudioSource.html#a2bbce89d4bef9cf46b1113de3245655a">context</a> != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">return</span> this-&gt;<a class="code" href="classAudioSource.html#a2bbce89d4bef9cf46b1113de3245655a">context</a>-&gt;signal.rate;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;}</div>
<div class="ttc" id="classAudioSource_html_a2bbce89d4bef9cf46b1113de3245655a"><div class="ttname"><a href="classAudioSource.html#a2bbce89d4bef9cf46b1113de3245655a">AudioSource::context</a></div><div class="ttdeci">sox_format_t * context</div><div class="ttdoc">Pointer to the SoX context associated with this source. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8hpp_source.html#l00145">audio_source.hpp:145</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad8639603fb59d21f5c1369707f16975c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::uint64_t AudioSource::Seek </td>
          <td>(</td>
          <td class="paramtype">std::chrono::microseconds&#160;</td>
          <td class="paramname"><em>position</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Seeks to the given position, in microseconds. </p>
<p>For convenience, the new position (in terms of samples) is returned. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">position</td><td>The new position in the file, in microseconds. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new position in the file, in samples. </dd></dl>

<p>Definition at line <a class="el" href="audio__source_8cpp_source.html#l00105">105</a> of file <a class="el" href="audio__source_8cpp_source.html">audio_source.cpp</a>.</p>

<p>References <a class="el" href="audio__source_8cpp_source.html#l00052">ChannelCount()</a>, <a class="el" href="audio__source_8cpp_source.html#l00184">Close()</a>, <a class="el" href="audio__source_8hpp_source.html#l00145">context</a>, <a class="el" href="audio__source_8hpp_source.html#l00140">decode_state</a>, <a class="el" href="classAudioSource.html#a9a2f5de44325c84e69a7af1331aa159da9b75f3acd3c3480965b0f5ee466e7f25">DECODING</a>, <a class="el" href="classAudioSource.html#a9a2f5de44325c84e69a7af1331aa159da581953f6b20ad7f993b64b1dc632032e">END_OF_FILE</a>, <a class="el" href="messages_8h_source.html#l00033">MSG_SEEK_FAIL</a>, <a class="el" href="audio__source_8cpp_source.html#l00172">Open()</a>, <a class="el" href="audio__source_8cpp_source.html#l00045">Path()</a>, and <a class="el" href="audio__source_8cpp_source.html#l00069">SamplePositionFromMicroseconds()</a>.</p>
<div class="fragment"><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;{</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    assert(this-&gt;<a class="code" href="classAudioSource.html#a2bbce89d4bef9cf46b1113de3245655a">context</a> != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keyword">auto</span> samples = <a class="code" href="classAudioSource.html#ac0a5d14505c36238d4a8a465122ff06e">SamplePositionFromMicroseconds</a>(position);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="comment">// See BytesPerSample() for an explanation of this ChannelCount().</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keyword">auto</span> sox_samples = samples * <a class="code" href="classAudioSource.html#a267178b39a3a4d2fc86f41f6a96caf03">ChannelCount</a>();</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="comment">// libsox doesn&#39;t seem to like seeking into an ended file, so close</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="comment">// and re-open it first.</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classAudioSource.html#abe3899ebe685335a84c5bfee5a20a96f">decode_state</a> == <a class="code" href="classAudioSource.html#a9a2f5de44325c84e69a7af1331aa159da581953f6b20ad7f993b64b1dc632032e">DecodeState::END_OF_FILE</a>) {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        std::string path = <a class="code" href="classAudioSource.html#aea5c3828f1b22a9e103a5d56f9ffa5ec">Path</a>();</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <a class="code" href="classAudioSource.html#a46444de950d02ac35a695ad167fed2f4">Close</a>();</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <a class="code" href="classAudioSource.html#a9b10234d7c9f29b17008b4dc3eab2a71">Open</a>(path);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    }</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">if</span> (sox_seek(this-&gt;<a class="code" href="classAudioSource.html#a2bbce89d4bef9cf46b1113de3245655a">context</a>, sox_samples, SOX_SEEK_SET) != SOX_SUCCESS) {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="classInternalError.html">InternalError</a>(<a class="code" href="messages_8h.html#aed3c894dfba47c4007dc39b38b5d3dbe">MSG_SEEK_FAIL</a>);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="comment">// Reset the decoder state, because otherwise the decoder will get very</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="comment">// confused.</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    this-&gt;<a class="code" href="classAudioSource.html#abe3899ebe685335a84c5bfee5a20a96f">decode_state</a> = <a class="code" href="classAudioSource.html#a9a2f5de44325c84e69a7af1331aa159da9b75f3acd3c3480965b0f5ee466e7f25">DecodeState::DECODING</a>;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">return</span> samples;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div>
<div class="ttc" id="classAudioSource_html_a2bbce89d4bef9cf46b1113de3245655a"><div class="ttname"><a href="classAudioSource.html#a2bbce89d4bef9cf46b1113de3245655a">AudioSource::context</a></div><div class="ttdeci">sox_format_t * context</div><div class="ttdoc">Pointer to the SoX context associated with this source. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8hpp_source.html#l00145">audio_source.hpp:145</a></div></div>
<div class="ttc" id="classAudioSource_html_a46444de950d02ac35a695ad167fed2f4"><div class="ttname"><a href="classAudioSource.html#a46444de950d02ac35a695ad167fed2f4">AudioSource::Close</a></div><div class="ttdeci">void Close()</div><div class="ttdoc">Closes the AudioSource&#39;s current file. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8cpp_source.html#l00184">audio_source.cpp:184</a></div></div>
<div class="ttc" id="classAudioSource_html_abe3899ebe685335a84c5bfee5a20a96f"><div class="ttname"><a href="classAudioSource.html#abe3899ebe685335a84c5bfee5a20a96f">AudioSource::decode_state</a></div><div class="ttdeci">DecodeState decode_state</div><div class="ttdoc">The current state of decoding. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8hpp_source.html#l00140">audio_source.hpp:140</a></div></div>
<div class="ttc" id="classAudioSource_html_a9a2f5de44325c84e69a7af1331aa159da9b75f3acd3c3480965b0f5ee466e7f25"><div class="ttname"><a href="classAudioSource.html#a9a2f5de44325c84e69a7af1331aa159da9b75f3acd3c3480965b0f5ee466e7f25">AudioSource::DecodeState::DECODING</a></div><div class="ttdoc">The decoder is currently decoding a frame. </div></div>
<div class="ttc" id="classAudioSource_html_aea5c3828f1b22a9e103a5d56f9ffa5ec"><div class="ttname"><a href="classAudioSource.html#aea5c3828f1b22a9e103a5d56f9ffa5ec">AudioSource::Path</a></div><div class="ttdeci">std::string Path() const </div><div class="ttdoc">Gets the file-path of this audio source&#39;s audio file. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8cpp_source.html#l00045">audio_source.cpp:45</a></div></div>
<div class="ttc" id="classAudioSource_html_ac0a5d14505c36238d4a8a465122ff06e"><div class="ttname"><a href="classAudioSource.html#ac0a5d14505c36238d4a8a465122ff06e">AudioSource::SamplePositionFromMicroseconds</a></div><div class="ttdeci">std::uint64_t SamplePositionFromMicroseconds(std::chrono::microseconds position) const </div><div class="ttdoc">Converts a position in microseconds to an elapsed sample count. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8cpp_source.html#l00069">audio_source.cpp:69</a></div></div>
<div class="ttc" id="classAudioSource_html_a9a2f5de44325c84e69a7af1331aa159da581953f6b20ad7f993b64b1dc632032e"><div class="ttname"><a href="classAudioSource.html#a9a2f5de44325c84e69a7af1331aa159da581953f6b20ad7f993b64b1dc632032e">AudioSource::DecodeState::END_OF_FILE</a></div><div class="ttdoc">The decoder has run out of things to decode. </div></div>
<div class="ttc" id="messages_8h_html_aed3c894dfba47c4007dc39b38b5d3dbe"><div class="ttname"><a href="messages_8h.html#aed3c894dfba47c4007dc39b38b5d3dbe">MSG_SEEK_FAIL</a></div><div class="ttdeci">const std::string MSG_SEEK_FAIL</div><div class="ttdoc">Message shown when an attempt to seek fails. </div><div class="ttdef"><b>Definition:</b> <a href="messages_8h_source.html#l00033">messages.h:33</a></div></div>
<div class="ttc" id="classAudioSource_html_a267178b39a3a4d2fc86f41f6a96caf03"><div class="ttname"><a href="classAudioSource.html#a267178b39a3a4d2fc86f41f6a96caf03">AudioSource::ChannelCount</a></div><div class="ttdeci">std::uint8_t ChannelCount() const </div><div class="ttdoc">Returns the channel count. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8cpp_source.html#l00052">audio_source.cpp:52</a></div></div>
<div class="ttc" id="classInternalError_html"><div class="ttname"><a href="classInternalError.html">InternalError</a></div><div class="ttdoc">An Error signifying that playd has hit an internal snag. </div><div class="ttdef"><b>Definition:</b> <a href="errors_8hpp_source.html#l00056">errors.hpp:56</a></div></div>
<div class="ttc" id="classAudioSource_html_a9b10234d7c9f29b17008b4dc3eab2a71"><div class="ttname"><a href="classAudioSource.html#a9b10234d7c9f29b17008b4dc3eab2a71">AudioSource::Open</a></div><div class="ttdeci">void Open(const std::string &amp;path)</div><div class="ttdoc">Opens a new file for this AudioSource. </div><div class="ttdef"><b>Definition:</b> <a href="audio__source_8cpp_source.html#l00172">audio_source.cpp:172</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="abe3899ebe685335a84c5bfee5a20a96f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classAudioSource.html#a9a2f5de44325c84e69a7af1331aa159d">DecodeState</a> AudioSource::decode_state</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The current state of decoding. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classAudioSource.html#a9a2f5de44325c84e69a7af1331aa159d" title="An enumeration of possible states the decoder can be in. ">DecodeState</a> </dd></dl>

<p>Definition at line <a class="el" href="audio__source_8hpp_source.html#l00140">140</a> of file <a class="el" href="audio__source_8hpp_source.html">audio_source.hpp</a>.</p>

<p>Referenced by <a class="el" href="audio__source_8cpp_source.html#l00133">Decode()</a>, and <a class="el" href="audio__source_8cpp_source.html#l00105">Seek()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/audio/<a class="el" href="audio__source_8hpp_source.html">audio_source.hpp</a></li>
<li>src/audio/<a class="el" href="audio__source_8cpp_source.html">audio_source.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classAudioSource.html">AudioSource</a></li>
    <li class="footer">Generated on Sun Sep 7 2014 13:03:29 for URY playd by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.7 </li>
  </ul>
</div>
</body>
</html>
